# Husky_Utils

A collection of utility scripts and tools for working with the Husky robot, including calibration, motion simulation, sphere packing for Splanning, and ROS topic debugging.

> **Note:**  Please source your environment with ROS Noetic before executing any files. And Have your Husky robot connected and configured (for ROS interactions).
## Directory Structure

- `calibrate_husky.py` — Calibrate the Husky robot's odometry and save calibration data.
- `husky_motion_sim.py` — Simulate Husky motion, visualize trajectories, and compare predicted vs. actual odometry.
- `husky_sphere_packing.py` — Generate and visualize sphere packing for the Husky robot's chassis, export to YAML.
- `husky_subscriber_test.py` — Simple ROS node to print joint states for debugging.
- `husky.urdf` — URDF model of the Husky robot.
- `husky_calibration.yaml` — Calibration offsets (generated by calibration script).
- `husky_calibration_data.csv` — Calibration data log (generated by calibration script).
- `husky_data.csv` — Motion simulation data log (generated by simulation script).
- `husky_spheres.yaml` — Sphere packing data (generated by sphere packing script).

## Setup

### 1. Clone the repository

```sh
git clone git@github.com:AJaxRUN/Husky_Utils.git
cd Husky_Utils
```

### 2. Create and activate the conda environment

```sh
conda env create -f environment.yml
conda activate husky_utils
```

If you don't have an `environment.yml` yet, use the following template:

```yaml
# filepath: environment.yml
name: husky_utils
channels:
  - conda-forge
  - robostack
  - defaults
dependencies:
  - python=3.8
  - numpy
  - matplotlib
  - pyyaml
  - trimesh
  - urdfpy
  - transforms3d
  - pybullet
  - pip
  - pip:
      - pyrender
      - rospy
      - geometry_msgs
      - nav_msgs
      - sensor_msgs
      - tf
```

> **Note:** Some ROS Python packages (`rospy`, `geometry_msgs`, etc.) may need to be installed via [ROS Noetic](http://wiki.ros.org/noetic/Installation/Ubuntu) or [Robostack](https://robostack.github.io/). If you are running on Ubuntu, source your ROS environment before running the scripts.

### 3. Usage

#### Calibrate the Husky

```sh
python calibrate_husky.py
```
- This will move the robot through a calibration sequence and save offsets to `husky_calibration.yaml`.

#### Simulate Husky Motion

```sh
python husky_motion_sim.py
```
- Visualizes and compares real vs. predicted trajectories.
- Press `c` to execute a motion sequence, `q` to quit and save data.

#### Generate and Visualize Sphere Packing

```sh
python husky_sphere_packing.py
```
- Generates a grid of spheres for collision checking and visualizes them in PyBullet.
- Exports the configuration to `husky_spheres.yaml`.

#### Debug Joint States

```sh
python husky_subscriber_test.py
```
- Prints joint state messages from `/joint_states` topic.

## Notes

- The scripts assume a running ROS master and appropriate topics (`/cmd_vel`, `/odometry/filtered`, `/joint_states`).
- The URDF and mesh files referenced in the URDF should be available in your ROS installation.
- Data files (`.csv`, `.yaml`) are generated by the scripts as you run them.

## License

See [husky.urdf](husky.urdf) for the Clearpath Robotics BSD license. All scripts in this repository are provided as-is for research and educational purposes.

---

**Author:**  
Arjun C R